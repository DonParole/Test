#
#
# DO NOT EDIT THIS FILE IT WILL BE REGENERATED AUTOMATICALLY BY SUBVERSION EDGE
#
# If you must make a change to the contents of this file then copy and paste the
# content into the httpd.conf file and comment out the Include statement for
# this file. The httpd.conf file is not modified or generated and is safe for
# you to modify.
#
#

Include "/opt/csvn/data/conf/ctf_httpd.conf"
<VirtualHost *:80>
# SSL is off
LoadModule python_module lib/modules/mod_python.so.2.6

# Required for SCRIPT_URI/URL in viewvc libs, not just rewrite rules
LoadModule rewrite_module lib/modules/mod_rewrite.so
RewriteEngine on
RewriteOptions inherit

# Work around authz and SVNListParentPath issue
RedirectMatch ^(/svn)$ $1/
<Location /svn/>   
   DAV svn
   SVNParentPath "/ext_svn/repositories"
   SVNReposName "CollabNet Subversion Repository"
  AuthzSVNAccessFile "/opt/csvn/data/conf/svn_access_file"
  SVNListParentPath On
  Allow from all
  AuthType Basic
  AuthName "CollabNet Subversion Repository"
  AuthBasicProvider csvn-file-users ldap-users
  Require valid-user
</Location>


<Directory "/opt/csvn/www/viewvc/docroot">
  AllowOverride None
  Options None
  Order allow,deny
  Allow from all
</Directory>
Alias /viewvc-static "/opt/csvn/www/viewvc/docroot"

ScriptAlias /viewvc "/opt/csvn/bin/mod_python/viewvc.py"

<Location /viewvc>
  SetHandler mod_python
  PythonDebug on
  AddDefaultCharset UTF-8
  SetEnv CSVN_HOME "/opt/csvn"

  PythonPath "[r'/opt/csvn/lib', r'/opt/csvn/bin/mod_python', r'/opt/csvn/lib/viewvc']+sys.path"
  PythonHandler handler
  Allow from all
  AuthType Basic
  AuthName "CollabNet Subversion Repository"
  AuthBasicProvider csvn-file-users ldap-users
  Require valid-user
</Location>

</VirtualHost>

#
# auth helper endpoint for use by SvnEdge
#        
<VirtualHost localhost:49153>
  <Location "/">
  Allow from all
  AuthType Basic
  AuthName "CollabNet Subversion Repository"
  AuthBasicProvider csvn-file-users ldap-users

  Require valid-user
  </Location>
</VirtualHost>
